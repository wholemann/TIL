애자일을 하는 사람들은 유저 스토리 작성에 집착한다. 유저 스토리 작성이 정말 강력한 도구이긴 하다. 하지만 많은 사람들이 잘못 작성하고 있다.

예를 들어보면:
```
As a user
I want to receive issue webhooks from Gitlab
So that I can list all current tasks
```

올바른 유저 스토리 같아 보이지만, 사실은 많은 문제점을 내포하고 있다. 당신이 적어도 8가지 실수를 발견하지 못했다면 이 글은 당신에게 유용할 것이다.

이 글은 크게 3가지로 구분되어 있다:
  1. 유저 스토리 기본 형식을 향상
  2. 유저 스토리를 검증할 수 있도록 BDD를 이용한 유저 스토리 재작성
  3. 유저 스토리와 테스트, 소스코드, 문서를 연결

모든 부분이 흥미롭진 않겠지만, 모두 이해하는 것이 중요하다.

# 문제 발견 및 해결

다들 알겠지만 우리의 요구 사항은 정확하고, 모호하지 않으며, 완전하고, 일관성이 있고, 우선순위가 있으며, 검증가능하고, 수정할 수 있고, 추적 가능해야 한다. 물론 처음엔 요구사항처럼 보이진 않을 수도 있지만 말이다.
유저 스토리는 위에 열거된 특성을 가지지 않는 경향이 있다. 그 부분을 고쳐야 한다.

## 일관된 언어 사용하라

"receive issue webhooks" 과 "list all current tasks"는 어떻게 연결되는가? "tasks" 와 "issues" 는 같은 것인가 아닌가? 둘은 완전 다른 것들이거나 아니면 단어 선택이 잘못된 것이다. 우린 그걸 어떻게 알 수 있을까?
바로 용어 사전집을 통해서다. 모든 프로젝트는 앞으로 유비쿼터스 언어가 될 특정용어를 정의하는 것으로 시작해야 한다. 애초에 어떻게 이 용어집을 만들까? 우리는 도메인 전문가들에게 물어본다. 우리가 새로운 용어를 만나면: 모든 도메인 전문가들이 이 용어를 정확하고 비슷하게 이해하도록 해야한다. 또한 우리는 같은 용어라도 상황과 맥락에 따라서 다르게 이해될 수 있다는 사실에 주의해야 한다.

이 사례에서 도메인 전문가에게 자문을 구한 후 우리는 "task" 와 "issue" 가 같은 것임을 알게 됐다고 해보자. 이제 잘못된 용어를 제거해야될 때다.
```
As a user
I want to receive issue webhooks from Gitlab
+++So that I can list all current issues
---So that I can list all current tasks
```
훌륭하다. 같은 엔티티에 대해서 같은 용어를 쓰는 것은 우리의 요구사항을 더 명확하고 일관되게 만든다.

## 사용자는 당신만을 위한 제품을 원하지 않는다.

마지막 줄을 수정하고 나서야 사용자의 목적은 "현재 모든 이슈를 나열하는 것" 이라는 걸 알게 됐다. 왜 사용자는 현재 모든 이슈가 나열되길 원하는가? 그게 사용자에게 무슨 의미가 있는가? 사실 어떤 사용자도 그걸 원하지 않는다. 이 요구사항은 정확하지 않다.
이건 요구사항 기술에 있어서 매우 중요한 문제를 나타내는 부분이다. 우리는 사용자의 목적과 우리의 목적을 혼동하는 경우가 많다. 우리의 목표가 사용자들을 기분 좋게 하는 것인만큼, 우선 사용자들에게 집중해야 된다. 그들의 욕구가 우리의 욕구보다 중요하다. 그래서 우리는 요구사항에 사용자의 욕구를 명시해야된다.
사용자가 원하는 것을 어떻게 알 수 있을까? 다시 말하지만, 우린 알 수 없다. 반드시 실사용자에게 자문을 구해야 한다. 자문이 여의치 않으면 우리 스스로 가설이라도 세워야 한다.
```
As a user
I want to receive issue webhooks from Gitlab
+++So that I can overview and track the issues' progress
---So that I can list all current issues
```
피드백을 수집해보니 사용자들은 프로젝트의 진행 정도를 알고 싶어한다는 걸 알게 됐다. 그들은 이슈가 나열되길 원하는 게 아니었다. 그렇기 때문에 우리는 써드 파티 서비스로부터 이러한 사용자 피드백 정보를 받고 보관해야 되는 것이다.

## 기술적 세부사항을 제거하라

"receive issue webhooks" 을 문자 그대로 원하는 사람을 만난 적이 있는가? 사실 누구도 그걸 원치 않는다. 이 경우에도 우리는 서로 다른 두 가지 관심사를 혼동한 것이다.
사용자의 목적과 그걸 달성시켜주는 기술적인 방법은 명확하게 구분해야 된다. 그리고 "to receive issue webhooks" 는 기술적인 구현에 대한 내용이다. 당장 내일 웹훅 대신 웹소켓, 푸쉬알람 또는 그 외의 기술로 변경될 수 있다. 그리고 기술의 변경 때문에 사용자의 목적은 변하지 않는다.
```
As a user
+++I want to have up-to-date information about Gitlab issues
---I want to receive issue webhooks from Gitlab
So that I can overview and track the issues' progress
```
보이는가? 필요한 정보만 남았고, 구현 세부 정보는 없어졌다.

